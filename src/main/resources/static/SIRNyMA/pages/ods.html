<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productos Relacionados con ODS</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../styles/ods.css">
</head>

<body>
      <!-- Navbar -->
    <nav class="navbar navbar-expand-lg" style="background-color: #003057;">
      <div class="container-fluid">
          <img src="/assets/INEGI_g.png" alt="Logo" class="responsive-image" style="padding-right: 5px; width: 10rem; filter: invert(1) brightness(2) contrast(1.5);" />
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
              <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse justify-content-center" id="navbarNav" style="padding-right: 185px;">
              <ul class="navbar-nav">
                  <li class="nav-item"><a style="color: aliceblue;" class="nav-link" href="index.html">Inicio</a></li>
                  <li class="nav-item"><a style="color: aliceblue;" class="nav-link" href="procesos.html">Procesos</a></li>
                  <li class="nav-item"><a style="color: aliceblue;" class="nav-link" href="variables.html">Variables</a></li>
                  <li class="nav-item"><a style="color: aliceblue;" class="nav-link" href="ods.html">ODS</a></li>
                  <li class="nav-item"><a style="color: aliceblue;" class="nav-link" href="indicadores.html">Indicadores existentes</a></li>
              </ul>
          </div>
      </div>
    </nav>
    <!-- Contenedor principal -->
    <div class="container mt-4">
        <h2 class="mb-4" style="text-align: center;">Objetivos del Desarrollo Sostenible</h2>

        <div>

            <div class="row g-1 m-0">
          
                <div class="col-2" id="Objetivo1">
                  <div class="text-center">
                    <img class="img-fluid hover-animate Rproyector" src="/assets/ODS0010_es.jpg" style="max-width: 160px;" type="button"
                      data-bs-toggle="collapse" data-bs-target="#collapseExample" aria-expanded="false"
                      aria-controls="collapseExample">
                  </div>
                  <div class="result-container mt-3" id="result-Objetivo1"></div>
                </div>
          
                <div class="col-2" id="Objetivo2">
                  <div class="text-center">
                    <img class="img-fluid hover-animate Rproyector" src="/assets/ODS0020_es.jpg" style="max-width: 160px;" type="button"
                      data-bs-toggle="collapse" data-bs-target="#collapseExample2" aria-expanded="false"
                      aria-controls="collapseExample">
                  </div>
                  <div class="result-container mt-3" id="result-Objetivo2"></div>
                </div>
          
                <div class="col-2" id="Objetivo3">
                  <div class="text-center">
                    <img class="img-fluid hover-animate Rproyector" src="/assets/ODS0030_es.jpg" style="max-width: 160px;" type="button"
                      data-bs-toggle="collapse" data-bs-target="#collapseExample3" aria-expanded="false"
                      aria-controls="collapseExample">
                  </div>
                </div>
          
                <div class="col-2" id="Objetivo4">
                  <div class="text-center">
                    <img class="img-fluid hover-animate Rproyector" src="/assets/ODS0040_es.jpg" style="max-width: 160px;" type="button"
                      data-bs-toggle="collapse" data-bs-target="#collapseExample4" aria-expanded="false"
                      aria-controls="collapseExample">
                  </div>
                </div>
          
                <div class="col-2" id="Objetivo5">
                  <div class="text-center">
                    <img class="img-fluid hover-animate Rproyector" src="/assets/ODS0050_es.jpg" style="max-width: 160px;" type="button"
                      data-bs-toggle="collapse" data-bs-target="#collapseExample5" aria-expanded="false"
                      aria-controls="collapseExample">
                  </div>
                </div>
          
                <div class="col-2" id="Objetivo6">
                  <div class="text-center">
                    <img class="img-fluid hover-animate Rproyector" src="/assets/ODS0060_es.jpg" style="max-width: 160px;" type="button"
                      data-bs-toggle="collapse" data-bs-target="#collapseExample6" aria-expanded="false"
                      aria-controls="collapseExample">
                  </div>
                </div>
          
                <div class="col-lados-custom"></div>
          
              </div>

              <div class="row g-1 m-0">
                
                <div class="col-2" id="Objetivo7">
                  <div class="text-center">
                    <img class="img-fluid hover-animate Rproyector" src="/assets/ODS0070_es.jpg" style="max-width: 160px;" type="button"
                      data-bs-toggle="collapse" data-bs-target="#collapseExample7" aria-expanded="false"
                      aria-controls="collapseExample">
                  </div>
                </div>
          
                <div class="col-2" id="Objetivo8">
                  <div class="text-center">
                    <img class="img-fluid hover-animate Rproyector" src="/assets/ODS0080_es.jpg" style="max-width: 160px;" type="button"
                      data-bs-toggle="collapse" data-bs-target="#collapseExample8" aria-expanded="false"
                      aria-controls="collapseExample">
                  </div>
                </div>
          
                <div class="col-2"  id="Objetivo9">
                  <div class="text-center">
                    <img class="img-fluid hover-animate Rproyector" src="/assets/ODS0090_es.jpg" style="max-width: 160px;" type="button"
                      data-bs-toggle="collapse" data-bs-target="#collapseExample9" aria-expanded="false"
                      aria-controls="collapseExample">
                  </div>
                </div>
          
                <div class="col-2" id="Objetivo10">
                  <div class="text-center">
                    <img class="img-fluid hover-animate Rproyector" src="/assets/ODS0100_es.jpg" style="max-width: 160px;" type="button"
                      data-bs-toggle="collapse" data-bs-target="#collapseExample10" aria-expanded="false"
                      aria-controls="collapseExample">
                  </div>
                </div>
          
                <div class="col-2" id="Objetivo11">
                  <div class="text-center">
                    <img class="img-fluid hover-animate Rproyector" src="/assets/ODS0110_es.jpg" style="max-width: 160px;" type="button"
                      data-bs-toggle="collapse" data-bs-target="#collapseExample11" aria-expanded="false"
                      aria-controls="collapseExample">
                  </div>
                </div>
          
                <div class="col-2" id="Objetivo12">
                  <div class="text-center">
                    <img class="img-fluid hover-animate Rproyector" src="/assets/ODS0120_es.jpg" style="max-width: 160px;" type="button"
                      data-bs-toggle="collapse" data-bs-target="#collapseExample12" aria-expanded="false"
                      aria-controls="collapseExample">
                  </div>
                </div>
                <div class="col-lados-custom"></div>
          
              </div>

              <div class="row g-1 m-0 ">
                <div class="col-lados-custom"></div>
                <div class="col-2" id="Objetivo13">
                  <div class="text-center">
                    <img class="img-fluid hover-animate Rproyector" src="/assets/ODS0130_es.jpg" style="max-width: 160px;" type="button"
                      data-bs-toggle="collapse" data-bs-target="#collapseExample13" aria-expanded="false"
                      aria-controls="collapseExample">
                  </div>
                </div>
                <div class="col-2" id="Objetivo14">
                  <div class="text-center">
                    <img class="img-fluid hover-animate Rproyector" src="/assets/ODS0140_es.jpg" style="max-width: 160px;" type="button"
                      data-bs-toggle="collapse" data-bs-target="#collapseExample14" aria-expanded="false"
                      aria-controls="collapseExample">
                  </div>
                </div>
                <div class="col-2" id="Objetivo15">
                  <div class="text-center">
                    <img class="img-fluid hover-animate Rproyector" src="/assets/ODS0150_es.jpg" style="max-width: 160px;" type="button"
                      data-bs-toggle="collapse" data-bs-target="#collapseExample15" aria-expanded="false"
                      aria-controls="collapseExample">
                  </div>
                </div>
                <div class="col-2" id="Objetivo16">
                  <div class="text-center">
                    <img class="img-fluid hover-animate Rproyector" src="/assets/ODS0160_es.jpg" style="max-width: 160px;" type="button"
                      data-bs-toggle="collapse" data-bs-target="#collapseExample16" aria-expanded="false"
                      aria-controls="collapseExample">
                  </div>
                </div>
                <div class="col-2" id="Objetivo17">
                  <div class="text-center">
                    <img class="img-fluid hover-animate Rproyector" src="/assets/ODS0170_es.jpg" style="max-width: 160px;" type="button"
                      data-bs-toggle="collapse" data-bs-target="#collapseExample17" aria-expanded="false"
                      aria-controls="collapseExample">
                  </div>
                </div>
                <div class="col-2">
                  <div class="text-center">
                    <img class="img-fluid hover-animate Rproyector" src="/assets/ODSLOG.jpg" style="max-width: 161px;" type="button">
                  </div>
          
                </div>
                <div class="col-lados-custom"></div>
              </div>

        </div>

    <div class="mt-5">
        <h3>Variables relacionadas con los ODS</h3>
        <div class="mt-3 card">
            <div class="card-body">
                <!-- Selector de cantidad de elementos por página -->
                <div class="d-flex justify-content-end mb-3">
                    <label for="itemsPerPage" class="me-2">Mostrar:</label>
                    <select id="itemsPerPage" class="form-select w-auto">
                        <option value="10">10</option>
                        <option value="20">20</option>
                        <option value="30">30</option>
                    </select>
                </div>

               <div class="text-center">Seleccione uno de los objetivos para desplegar la información que corresponde a las variables relacionadas</div>
                <!-- Contenedor dinámico para los resultados -->
                <div id="OdsContainer"></div>

                <!-- Paginador -->
                <nav>
                    <ul class="pagination justify-content-center mt-4" id="pagination"></ul>
                </nav>
            </div>
        </div>
    </div>
        <!-- Paginador -->
        <nav>
            <ul class="pagination justify-content-center mt-4" id="pagination"></ul>
        </nav>
    </div>

    <script>
    document.addEventListener("DOMContentLoaded", function () {
        let data = [];
        let filteredData = {};
        let itemsPerPage = 10; // Número de elementos por página por defecto
        let currentPage = 1; // Página actual

        // Obtener los datos de la API
        fetch("/api/ods")
            .then(response => response.json())
            .then(responseData => {
                data = responseData;

                // Filtrar los datos por "Meta ODS detectada" y agruparlos por número de meta
                filteredData = data.reduce((acc, item) => {
                    const metaNumber = item.meta.match(/\d+/)?.[0]; // Extraer el número de la meta
                    if (metaNumber) {
                        if (!acc[metaNumber]) acc[metaNumber] = [];
                        acc[metaNumber].push(item);
                    }
                    return acc;
                }, {});

                console.log("Datos agrupados por meta ODS:", filteredData);
            })
            .catch(error => console.error("Error al obtener los datos de la API:", error));

        // Agregar eventos a las imágenes
        const images = document.querySelectorAll("[id^='Objetivo']");
        images.forEach(image => {
            image.addEventListener("click", function () {
                const targetMeta = this.id.match(/\d+/)?.[0]; // Extraer el número del ID de la imagen
                const container = document.getElementById("OdsContainer");
                const paginationContainer = document.getElementById("pagination");

                // Alternar visibilidad al hacer clic en la imagen
                if (container.dataset.meta === targetMeta) {
                    container.innerHTML = ""; // Limpiar el contenedor
                    paginationContainer.innerHTML = ""; // Limpiar el paginador
                    delete container.dataset.meta; // Eliminar el meta asociado
                    return;
                }

                // Guardar el meta actual en el contenedor
                container.dataset.meta = targetMeta;

                if (targetMeta && filteredData[targetMeta]) {
                    renderItems(filteredData[targetMeta], container, paginationContainer);
                } else {
                    console.warn("No se encontraron datos para la meta ODS:", targetMeta);
                    container.innerHTML = "<p class='text-center'>No hay datos disponibles para este objetivo.</p>";
                    paginationContainer.innerHTML = "";
                }
            });
        });

        // Cambiar el número de elementos por página
        document.getElementById("itemsPerPage").addEventListener("change", function () {
            itemsPerPage = parseInt(this.value, 10);
            currentPage = 1; // Reiniciar a la primera página
            const container = document.getElementById("OdsContainer");
            const paginationContainer = document.getElementById("pagination");
            const targetMeta = container.dataset.meta;

            if (targetMeta && filteredData[targetMeta]) {
                renderItems(filteredData[targetMeta], container, paginationContainer);
            }
        });

        // Renderizar los elementos relacionados en el contenedor correspondiente
        function renderItems(items, container, paginationContainer) {
            container.innerHTML = ""; // Limpiar el contenedor
            paginationContainer.innerHTML = ""; // Limpiar el paginador

            // Paginación
            const totalPages = Math.ceil(items.length / itemsPerPage);

            function renderPage(page) {
                container.innerHTML = ""; // Limpiar el contenedor
                const start = (page - 1) * itemsPerPage;
                const end = start + itemsPerPage;
                const pageItems = items.slice(start, end);

                pageItems.forEach((item, index) => {
                    const card = document.createElement("div");
                    card.classList.add("col-12", "mb-3");

                    card.innerHTML = `
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">${item.varAsig}</h5>
                                <p class="card-text"><strong>Objetivo del Desarrollo Sostenible:</strong> ${item.ods}</p>
                                <p class="card-text"><strong>Meta ODS detectada:</strong> ${item.meta}</p>
                                <h6 class="mt-3">Clasificación Temática</h6>
                                <ul>
                                    <li><strong>Indicador de los ODS:</strong> ${item.indicador}</li>
                                    <li><strong>Nivel de Contribución de la variable con los ODS:</strong> ${item.nivContOdss}</li>
                                    <li><strong>Comentario(s) sobre la relación de la variable con los ODS:</strong> ${item.comentOds}</li>
                                </ul>
                            </div>
                        </div>
                    `;
                    container.appendChild(card);
                });
            }

            function renderPagination() {
                paginationContainer.innerHTML = ""; // Limpiar el paginador

                for (let i = 1; i <= totalPages; i++) {
                    const li = document.createElement("li");
                    li.classList.add("page-item");
                    if (i === currentPage) li.classList.add("active");

                    const a = document.createElement("a");
                    a.classList.add("page-link");
                    a.href = "#";
                    a.textContent = i;
                    a.addEventListener("click", (e) => {
                        e.preventDefault();
                        currentPage = i;
                        renderPage(currentPage);
                        renderPagination();
                    });

                    li.appendChild(a);
                    paginationContainer.appendChild(li);
                }
            }

            renderPage(currentPage);
            if (totalPages > 1) renderPagination(); // Mostrar paginador solo si hay más de una página
        }
    });
</script>
  
 <!--! FOOTER -->
    <div class="container-fluid" style="background-color: #5d5d5d">
       <footer class="bd-footer">
         <div class="pt-4 pb-4">
           <div class="container">
             <div class="row">
               <div class="col-lg">
     
                 <a style="color: white; font-weight: bold; font-size: 15px; font-family: Helvetica, Sans-Serif; ">Contacto</a>
                 <ul class="nav flex-column">
                   <li><a href="https://www.inegi.org.mx/"><img class="img-fluid d-block m-1" style="height: 2.5rem; width: 12rem;" src="/assets/INEGI_c-modified.png"></a></li>
                   <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text" style="color: white"></a>
                   </li>
                   <li><a class="text-white d-block pt-1" href="https://www.inegi.org.mx/inegi/contacto.html#Directorios" style="font-family: Helvetica, Sans-Serif;">Directorio</a></li>
                   <li><a class="text-white d-block pt-1" href="https://www.inegi.org.mx/inegi/contacto.html" style="font-family: Helvetica, Sans-Serif;">Solicitud de información</a></li>
                   <br>
                   <ul style="list-style: none; padding: 0; display: flex; gap: 10px; margin-bottom: 5px;">
                   <li><a href="http://www.facebook.com/pages/inegi-informa/180299958681029" style="color: white"><i class="bi bi-facebook"></i></a></li>
                   <li><a href="http://twitter.com/inegi_informa" style="color: white"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-twitter-x" viewBox="0 0 16 16">
                     <path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865z"/>
                   </svg></a></li>
                   <li><a href="https://www.youtube.com/user/INEGIInforma" style="color: white"><i class="bi bi-youtube"></i></a></li>
                   <li><a href="https://www.instagram.com/inegi_informa/" style="color: white;"><i class="bi bi-instagram"></i></a></li>
                   <li><a href="https://www.inegi.org.mx/servicios/rss/" style="color: white"><i class="bi bi-rss-fill"></i></a></li>
                   </ul>
                 </ul>
               </div>
               <div class="col-lg">
                 <a style="color: white; font-weight: bold; font-size: 15px">Sitios de interés</a>
                 <ul class="nav flex-column">
                   <li class="nav-item mb-2"><a href="https://www.snieg.mx/cni/" target="_blank" class="nav-link p-0 text"
                       style="color: white; font-size: 14px; font-family: Helvetica, Sans-Serif;">Catálogo Nacional de Indicadores</a></li>
                   <li class="nav-item mb-2"><a href="https://www.cepal.org/es" target="_blank"
                       class="nav-link p-0 text" style="color: white; font-size: 14px ; font-family: Helvetica, Sans-Serif;">CEPAL</a></li>
                   <li class="nav-item mb-2"><a href="https://www.un.org/sustainabledevelopment/es/objetivos-de-desarrollo-sostenible/" target="_blank" class="nav-link p-0 text"
                         style="color: white; font-size: 14px ; font-family: Helvetica, Sans-Serif;">ODS-ONU</a></li>
                   <li class="nav-item mb-2"><a href="http://agenda2030.mx/" target="_blank" class="nav-link p-0 text"
                       style="color: white; font-size: 14px ; font-family: Helvetica, Sans-Serif;">SIODS</a></li>
                   <li class="nav-item mb-2"><a href="https://www.gob.mx/semarnat/acciones-y-programas/sistema-nacional-de-informacion-ambiental-y-de-recursos-naturales" target="_blank" class="nav-link p-0 text"
                       style="color: white; font-size: 14px ; font-family: Helvetica, Sans-Serif;">SNIARN</a></li>
                   <li class="nav-item mb-2"><a href="#" [routerLink]="['/dg/new']" target="_blank"
                     class="nav-link p-0 text" style="color: white; font-size: 14px ; font-family: Helvetica, Sans-Serif;">Ver más...</a></li>
                 </ul>
               </div>
             </div>
           </div>
         </div>
       </footer>
     </div>
   
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>   
   </body>
</html>
